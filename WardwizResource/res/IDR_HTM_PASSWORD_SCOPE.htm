<html custom-frame="solid-with-shadow" lang="ENGLISH">
	<head>
	<link href="IDR_TIS_ENGLISH.tis" hreflang="ENGLISH" rel="translation">
	<link href="IDR_TIS_GERMAN.tis" hreflang="GERMAN" rel="translation">
	<include src="IDR_HTM_FONT_AWESOME.htm" />	
	<style>
	@import url(IDR_CSS_GERMAN_LANG.css);
	@import url(IDR_CSS_MAIN.css);

	html 
	{ 
		width:283dip;           /* preferred/initial width */
		height:auto;//218dip;          /* content will not overflow, no vertical scrollbars on the window */  
		overflow:hidden;
	}	
	.set_chkbox_btn_app_setting{
		margin-top:5dip;
		margin-bottom:5dip;
		margin-left:65dip;
	}
	.set_chkbox_btn_app_setting:collapsed{
		visibility:none;
	}
	.set_chkbox_btn_folder_locker{
		margin-top:5dip;
		margin-bottom:5dip;
		margin-left:65dip;
	}
	.set_chkbox_btn_folder_locker:collapsed{
		visibility:none;
	}
	.set_chkbox_btn_parental_control{
		margin-top:5dip;
		margin-bottom:5dip;
		margin-left:65dip;
	}
	.set_chkbox_btn_parental_control:collapsed{
		visibility:none;
	}
	.set_chkbox_btn_uninstall{
		margin-top:5dip;
		margin-bottom:5dip;
		margin-left:65dip;
	}
	.set_chkbox_btn_uninstall:collapsed{
		visibility:none;
	}
	body.passwordScope{ 
		max-width:282dip!important;
		background-size:cover;
		padding:0; margin:0; 
		border:0.5dip solid #3d748e;  
	}
	.header_passwordScope{
		background:rgba(0,0,0,.3);
		flow:horizontal;
		width:282dip;        
		height:40dip;
	}
	.btn_positn_passwordScope
	{
		color: #fff;
		cursor: pointer;
		height:21dip;
		width:120dip;
		overflow:hidden;
		vertical-align:middle;
		text-align:center;
		margin-top:5dip;
		margin-bottom:5dip;
		margin-left:80dip;
		font-weight:normal;
		font-size:11dip!important;
	}	
	</style>
	<script type="text/tiscript">  
	include "IDR_TIS_SQLITE.tis";
	include "IDR_TIS_DECORATORS.tis";
	</script>

	<script type="text/tiscript">  
	var DataBase;
	var varDBPath;
	</script>

	<script type="text/tiscript">
	// Set passwrod for #BASIC
	function SetPwdForBasicEssential()
	{	
		//"FOLDER_LOCKER":1,	"PARENTAL_CONTROL":2,	"APPLICATION_SETTING":3,	"UNINSTALL":4
		DataBase = DB.open(varDBPath);
		var varFeatureList = DataBase.exec("CREATE TABLE IF NOT EXISTS WWIZ_PWDSCOPELIST(ID INTEGER PRIMARY KEY, SELECTED BOOL NOT NULL, FEATURENAME TINYINT NOT NULL, RESERVED1 NVARCHAR(250), RESERVED2 NVARCHAR(250), RESERVED3 NVARCHAR(250))");
		if(varFeatureList == 101)
		{
			DataBase.exec("INSERT INTO WWIZ_PWDSCOPELIST(SELECTED, FEATURENAME) VALUES (0, 3)");
			DataBase.exec("INSERT INTO WWIZ_PWDSCOPELIST(SELECTED, FEATURENAME) VALUES (0, 4)");
		}
		else{
			varFeatureList.close();
		}	
		DataBase.exec("INSERT INTO WWIZ_PWDFORPWDSCOPE (PASSWORD) VALUES (?)",view.parameters.varPassword);
		DataBase.close();			
		SetPasswordForBasicEssential();
	}
	function SetPasswordForBasicEssential()
	{
		//"FOLDER_LOCKER":1,	"PARENTAL_CONTROL":2,	"APPLICATION_SETTING":3,	"UNINSTALL":4
		var ArrFeature = [3,4];
		DataBase = DB.open(varDBPath);											
		for(var record in ArrFeature)
		{
			switch(record)
			{
				case 3: if($(#ID_CHK_APP_SETTING).state.checked == true)
						{
							DataBase.exec("UPDATE WWIZ_PWDSCOPELIST SET SELECTED = 1 WHERE FEATURENAME = ?",record);
						}
						break;
					
				case 4: if($(#ID_CHK_UNINSTALL).state.checked == true)
						{
							DataBase.exec("UPDATE WWIZ_PWDSCOPELIST SET SELECTED = 1 WHERE FEATURENAME = ?",record);
						}
						break;						
			}
		}
		DataBase.close();				
	}
	
	// Set passwrod for #ESSENTIALPLUS
	function SetPwdForEssPlus()
	{
		DataBase = DB.open(varDBPath);
		var varFeatureList = DataBase.exec("CREATE TABLE IF NOT EXISTS WWIZ_PWDSCOPELIST(ID INTEGER PRIMARY KEY, SELECTED BOOL NOT NULL, FEATURENAME TINYINT NOT NULL, RESERVED1 NVARCHAR(250), RESERVED2 NVARCHAR(250), RESERVED3 NVARCHAR(250))");
		if(varFeatureList == 101)
		{
			DataBase.exec("INSERT INTO WWIZ_PWDSCOPELIST(SELECTED, FEATURENAME) VALUES (0, 3)");
			DataBase.exec("INSERT INTO WWIZ_PWDSCOPELIST(SELECTED, FEATURENAME) VALUES (0, 2)");
			DataBase.exec("INSERT INTO WWIZ_PWDSCOPELIST(SELECTED, FEATURENAME) VALUES (0, 4)");
		}
		else{
			varFeatureList.close();
		}	
		DataBase.exec("INSERT INTO WWIZ_PWDFORPWDSCOPE (PASSWORD) VALUES (?)",view.parameters.varPassword);
		DataBase.close();			
		SetPasswordForEssPlus();
	}
	
	function SetPasswordForEssPlus()
	{
		//"FOLDER_LOCKER":1,	"PARENTAL_CONTROL":2,	"APPLICATION_SETTING":3,	"UNINSTALL":4
		var ArrFeature = [3,4,2];
		DataBase = DB.open(varDBPath);											
		for(var record in ArrFeature)
		{
			switch(record)
			{
				case 2: if($(#ID_CHK_PARENTAL_CONTROL).state.checked == true)
						{
							DataBase.exec("UPDATE WWIZ_PWDSCOPELIST SET SELECTED = 1 WHERE FEATURENAME = ?",record);
						}
						break;
				
				case 3: if($(#ID_CHK_APP_SETTING).state.checked == true)
						{
							DataBase.exec("UPDATE WWIZ_PWDSCOPELIST SET SELECTED = 1 WHERE FEATURENAME = ?",record);
						}
						break;
					
				case 4: if($(#ID_CHK_UNINSTALL).state.checked == true)
						{
							DataBase.exec("UPDATE WWIZ_PWDSCOPELIST SET SELECTED = 1 WHERE FEATURENAME = ?",record);
						}
						break;						
			}
		}
		DataBase.close();				
	}
	
	$(#ID_BTN_CREATE_PASSWORD).onClick = function()
	{	
		
		if(view.parameters.ProductVersion == #BASIC || view.parameters.ProductVersion == #ESSENTIAL)
		{
			SetPwdForBasicEssential();
		}
		else if(view.parameters.ProductVersion == #ESSENTIALPLUS)
		{
			SetPwdForEssPlus();
		}
		else
		{
			//"FOLDER_LOCKER":1,	"PARENTAL_CONTROL":2,	"APPLICATION_SETTING":3,	"UNINSTALL":4
			DataBase = DB.open(varDBPath);
			var varFeatureList = DataBase.exec("CREATE TABLE IF NOT EXISTS WWIZ_PWDSCOPELIST(ID INTEGER PRIMARY KEY, SELECTED BOOL NOT NULL, FEATURENAME TINYINT NOT NULL, RESERVED1 NVARCHAR(250), RESERVED2 NVARCHAR(250), RESERVED3 NVARCHAR(250))");
			if(varFeatureList == 101)
			{
				DataBase.exec("INSERT INTO WWIZ_PWDSCOPELIST(SELECTED, FEATURENAME) VALUES (0, 3)");
				DataBase.exec("INSERT INTO WWIZ_PWDSCOPELIST(SELECTED, FEATURENAME) VALUES (0, 2)");
				DataBase.exec("INSERT INTO WWIZ_PWDSCOPELIST(SELECTED, FEATURENAME) VALUES (0, 1)");
				DataBase.exec("INSERT INTO WWIZ_PWDSCOPELIST(SELECTED, FEATURENAME) VALUES (0, 4)");
			}
			else{
				varFeatureList.close();
			}
			DataBase.exec("INSERT INTO WWIZ_PWDFORPWDSCOPE (PASSWORD) VALUES (?)",view.parameters.varPassword);
			DataBase.close();	
			
			SetPasswordFor();
		}	
		
		DataBase = DB.open(varDBPath);			
		var vCheck = DataBase.exec("SELECT name FROM sqlite_master WHERE type='table' AND name='WWIZ_FORGETPASSWORD'");
		if(vCheck == 101)
		{
			DataBase.exec("CREATE TABLE IF NOT EXISTS WWIZ_FORGETPASSWORD(ID INTEGER PRIMARY KEY, QUESTION VARCHAR(100), ANSWER VARCHAR(100))");
		}
		else{
			vCheck.close();			
		}		
		DataBase.exec("INSERT INTO WWIZ_FORGETPASSWORD(QUESTION, ANSWER) VALUES(?,?)",view.parameters.vQuestion,view.parameters.vAnswer);
		DataBase.close();
		view.close(null);
	}
	
	function SetPasswordFor()
	{
		//"FOLDER_LOCKER":1,	"PARENTAL_CONTROL":2,	"APPLICATION_SETTING":3,	"UNINSTALL":4
		var ArrFeature = [1,2,3,4];
		DataBase = DB.open(varDBPath);											
		for(var record in ArrFeature)
		{
			switch(record)
			{
				case 2: if($(#ID_CHK_PARENTAL_CONTROL).state.checked == true)
						{
							DataBase.exec("UPDATE WWIZ_PWDSCOPELIST SET SELECTED = 1 WHERE FEATURENAME = ?",record);
						}
						break;
					
				case 1: if($(#ID_CHK_FOLDER_LOCKER).state.checked == true)
						{
							DataBase.exec("UPDATE WWIZ_PWDSCOPELIST SET SELECTED = 1 WHERE FEATURENAME = ?",record);
						}
						break;
					
				case 3: if($(#ID_CHK_APP_SETTING).state.checked == true)
						{
							DataBase.exec("UPDATE WWIZ_PWDSCOPELIST SET SELECTED = 1 WHERE FEATURENAME = ?",record);
						}
						break;
					
				case 4: if($(#ID_CHK_UNINSTALL).state.checked == true)
						{
							DataBase.exec("UPDATE WWIZ_PWDSCOPELIST SET SELECTED = 1 WHERE FEATURENAME = ?",record);
						}
						break;						
			}
		}
		DataBase.close();				
	}
	</script> 

	<script type="text/tiscript">
	$(#window-close) << event click()
	{	
		view.close(null);
	}
	
	function DisableFeature(varID)
	{
		switch(varID)
		{
			case 3: $(#ID_CHK_APP_SETTING).state.checked = true;
					$(#ID_CHK_APP_SETTING).state.disabled = true;	
					break;
			case 2: $(#ID_CHK_PARENTAL_CONTROL).state.checked = true;
					$(#ID_CHK_PARENTAL_CONTROL).state.disabled = true;	
					break;
			case 1: $(#ID_CHK_FOLDER_LOCKER).state.checked = true;
					$(#ID_CHK_FOLDER_LOCKER).state.disabled = true;	
					break;
			case 4: $(#ID_CHK_UNINSTALL).state.checked = true;
					$(#ID_CHK_UNINSTALL).state.disabled = true;	
					break;
		}
	}
	</script> 
	
	<script type="text/tiscript">
	function OnSetDefaultTheme()
	{
		$(body).style["background-image"] = "url(IDR_JPG_DEFAULT_BACKGRUND.jpg)";
		$(head).$append(<style>@import url(IDR_CSS_MAIN.css);</style>);
	}
	function OnSetDarkTheme()
	{
		$(body).style["background-image"] = "url(IDR_JPG_DARK_THEME.jpg)";
		$(head).$append(<style>@import url(IDR_CSS_MAIN_DARK_THEME.css);</style>);
	}
	function OnSetCrystalTheme()
	{
		$(body).style["background-image"] = "url(IDR_JPG_CRYSTAL_BACKGRUND.jpg)";
		$(head).$append(<style>@import url(IDR_CSS_MAIN_CRYSTAL_THEME.css);</style>);
	}
	</script>

	<script type="text/tiscript">
	function self.ready() {	
		if(view.parameters.varThemeType == "defaultTheme"){
			OnSetDefaultTheme();
		}
		else if(view.parameters.varThemeType == "darkTheme"){
			OnSetDarkTheme();
		}
		else if(view.parameters.varThemeType == "crystalTheme"){
			OnSetCrystalTheme();
		}
		self.language = view.parameters.varLanguageValue;
		varDBPath = view.parameters.vardb;
		if(view.parameters.ProductVersion == #BASIC)
		{
			$(.set_chkbox_btn_folder_locker).state.collapsed = true;
			$(.set_chkbox_btn_parental_control).state.collapsed = true;
		}
		else if(view.parameters.ProductVersion == #ESSENTIAL)
		{		
			$(.set_chkbox_btn_folder_locker).state.collapsed = true;
			$(.set_chkbox_btn_parental_control).state.collapsed = true;
		}
		else if(view.parameters.ProductVersion == #ESSENTIALPLUS)
		{
			$(.set_chkbox_btn_folder_locker).state.collapsed = true;
		}
		if(view.parameters.ID != "APPLICATION_SETTING")
		{
			$(#ID_CHK_APP_SETTING).state.checked = true;
		}
		DisableFeature(view.parameters.ID);	
	}
	</script> 
</head>
<body .passwordScope>
	<div .header_passwordScope>
		<window-caption role="window-caption">
			<label>ID_PWD_SCOPE</label>
		</window-caption>	
		<window-button #window-close></window-button>
	</div>
	<div>
		<div .set_chkbox_btn_app_setting> <input #ID_CHK_APP_SETTING|checkbox /><label for="ID_CHK_APP_SETTING">ID_APP_SET</label></div>
		<div .set_chkbox_btn_parental_control> <input #ID_CHK_PARENTAL_CONTROL|checkbox /><label for="ID_CHK_PARENTAL_CONTROL">ID_PARENTAL_CONTROL</label></div>
		<div .set_chkbox_btn_folder_locker> <input #ID_CHK_FOLDER_LOCKER|checkbox /><label for="ID_CHK_FOLDER_LOCKER">ID_FOLD_LOCK</label></div>
		<div .set_chkbox_btn_uninstall> <input #ID_CHK_UNINSTALL|checkbox /><label for="ID_CHK_UNINSTALL">ID_UNINSTALL</label></div>
		<div .btn_positn_passwordScope #ID_BTN_CREATE_PASSWORD><label>ID_CREATE_PWD</label></div>
	</div>  
</body>
</html>